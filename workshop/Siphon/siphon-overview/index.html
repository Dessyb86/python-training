<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Siphon Overview | Unidata Python Training</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#33758C">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../../rss.xml">
<link rel="canonical" href="https://unidata.github.io/python-training/workshop/Siphon/siphon-overview/">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="UCAR/Unidata">
<meta property="og:site_name" content="Unidata Python Training">
<meta property="og:title" content="Siphon Overview">
<meta property="og:url" content="https://unidata.github.io/python-training/workshop/Siphon/siphon-overview/">
<meta property="og:description" content="Siphon Overview
Unidata Python Workshop


Questions¶
What is a THREDDS Data Server (TDS)?
How can I use Siphon to access a TDS?

Objectives¶
Use Siphon to Access a THREDDS Catalog
Filtering Data
Use S">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2020-09-04T09:34:04-06:00">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark bg-primary
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="https://unidata.github.io/python-training/">
            <img src="https://www.unidata.ucar.edu/images/logos/unidata_logo_rgb_sm.png" alt="Unidata Python Training" id="logo" class="d-inline-block align-top"><span id="blog-title">Unidata Python Training</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../../python/intro-to-python" class="nav-link">Introduction to Python</a>
                </li>
<li class="nav-item">
<a href="../../../gallery/gallery-home" class="nav-link">Example Gallery</a>
                </li>
<li class="nav-item">
<a href="../../workshop-intro" class="nav-link">Python Workshop Materials</a>

                
            </li>
</ul>
<ul class="navbar-nav navbar-right">
<li class="nav-item">
    <a href="index.ipynb" id="sourcelink" class="nav-link">Source</a>
    </li>


                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text storypage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Siphon Overview</a></h1>

        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a name="top"></a></p>
<div style="width:1000 px">

<div style="float:right; width:98 px; height:98px;">
<img src="https://raw.githubusercontent.com/Unidata/MetPy/master/src/metpy/plots/_static/unidata_150x150.png" alt="Unidata Logo" style="height: 98px;">
</div>
<p></p>
<h2>Siphon Overview</h2>
<h4>Unidata Python Workshop</h4>
<div style="clear:both"></div>
</div>
<hr style="height:2px;">
<div style="float:right; width:250 px"><img src="https://unidata.github.io/siphon/latest/_static/siphon_150x150.png" alt="TDS" style="height: 200px;"></div>
<h4 id="Questions">Questions<a class="anchor-link" href="#Questions">¶</a>
</h4>
<ol>
<li>What is a THREDDS Data Server (TDS)?</li>
<li>How can I use Siphon to access a TDS?</li>
</ol>
<h4 id="Objectives">Objectives<a class="anchor-link" href="#Objectives">¶</a>
</h4>
<ol>
<li><a href="#threddsintro">Use Siphon to Access a THREDDS Catalog</a></li>
<li><a href="#filtering">Filtering Data</a></li>
<li><a href="#dataaccess">Use Siphon to Perform Remote Data Access</a></li>
</ol>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a name="threddsintro"></a></p>
<h3 id="1.-Use-Siphon-to-Access-a-THREDDS-Catalog">1. Use Siphon to Access a THREDDS Catalog<a class="anchor-link" href="#1.-Use-Siphon-to-Access-a-THREDDS-Catalog">¶</a>
</h3>
<p>THREDDS is a server for providing remote access to datasets and a variety of server-side services. THREDDS make data access more uniform regardless of the on-disk format.</p>
<ul>
<li>Data Access Services:<ul>
<li>HTTP Download</li>
<li>Web Mapping/Coverage Service (WMS/WCS)</li>
<li>OPeNDAP</li>
<li>NetCDF Subset Service</li>
<li>CDMRemote</li>
</ul>
</li>
</ul>
<p>There is a server with real-time data setup at <a href="http://thredds.ucar.edu">http://thredds.ucar.edu</a> that we'll use to explore the capability of THREDDS and learn how to access data. Let's open that link and explore in the browser what's available on THREDDS. Explore the NEXRAD level 3 data specifically.</p>
<h4 id="THREDDS-Catalogs">THREDDS Catalogs<a class="anchor-link" href="#THREDDS-Catalogs">¶</a>
</h4>
<ul>
<li>XML descriptions of data and metadata</li>
<li>Access methods</li>
<li>Easily processed with <code>siphon.catalog.TDSCatalog</code>
</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>

<span class="kn">from</span> <span class="nn">siphon.catalog</span> <span class="kn">import</span> <span class="n">TDSCatalog</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's get data from yesterday at this time. We'll use the timedelta object to do this in an easy way.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>2020-09-03 15:33:56.810427
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We'll then go find the URL for the level 3 radar data. Let's get the N0Q (tilt 1 base reflectivity) for the LRX radar. Notice that we change the <code>html</code> extension to <code>xml</code>. Siphon will do that for us, but issue a warning.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cat</span> <span class="o">=</span> <span class="n">TDSCatalog</span><span class="p">(</span><span class="s1">'http://thredds.ucar.edu/thredds/catalog/nexrad/level3/'</span>
                 <span class="sa">f</span><span class="s1">'N0Q/LRX/</span><span class="si">{</span><span class="n">date</span><span class="si">:</span><span class="s1">%Y%m%d</span><span class="si">}</span><span class="s1">/catalog.xml'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cat</span><span class="o">.</span><span class="n">datasets</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[4]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>['Level3_LRX_N0Q_20200903_2357.nids', 'Level3_LRX_N0Q_20200903_2347.nids', 'Level3_LRX_N0Q_20200903_2338.nids', 'Level3_LRX_N0Q_20200903_2328.nids', 'Level3_LRX_N0Q_20200903_2319.nids', 'Level3_LRX_N0Q_20200903_2309.nids', 'Level3_LRX_N0Q_20200903_2257.nids', 'Level3_LRX_N0Q_20200903_2248.nids', 'Level3_LRX_N0Q_20200903_2238.nids', 'Level3_LRX_N0Q_20200903_2229.nids', 'Level3_LRX_N0Q_20200903_2219.nids', 'Level3_LRX_N0Q_20200903_2209.nids', 'Level3_LRX_N0Q_20200903_2200.nids', 'Level3_LRX_N0Q_20200903_2150.nids', 'Level3_LRX_N0Q_20200903_2140.nids', 'Level3_LRX_N0Q_20200903_2131.nids', 'Level3_LRX_N0Q_20200903_2121.nids', 'Level3_LRX_N0Q_20200903_2112.nids', 'Level3_LRX_N0Q_20200903_2102.nids', 'Level3_LRX_N0Q_20200903_2052.nids', 'Level3_LRX_N0Q_20200903_2043.nids', 'Level3_LRX_N0Q_20200903_2033.nids', 'Level3_LRX_N0Q_20200903_2024.nids', 'Level3_LRX_N0Q_20200903_2014.nids', 'Level3_LRX_N0Q_20200903_2004.nids', 'Level3_LRX_N0Q_20200903_1955.nids', 'Level3_LRX_N0Q_20200903_1945.nids', 'Level3_LRX_N0Q_20200903_1936.nids', 'Level3_LRX_N0Q_20200903_1926.nids', 'Level3_LRX_N0Q_20200903_1916.nids', 'Level3_LRX_N0Q_20200903_1907.nids', 'Level3_LRX_N0Q_20200903_1857.nids', 'Level3_LRX_N0Q_20200903_1847.nids', 'Level3_LRX_N0Q_20200903_1838.nids', 'Level3_LRX_N0Q_20200903_1828.nids', 'Level3_LRX_N0Q_20200903_1819.nids', 'Level3_LRX_N0Q_20200903_1809.nids', 'Level3_LRX_N0Q_20200903_1759.nids', 'Level3_LRX_N0Q_20200903_1750.nids', 'Level3_LRX_N0Q_20200903_1740.nids', 'Level3_LRX_N0Q_20200903_1731.nids', 'Level3_LRX_N0Q_20200903_1721.nids', 'Level3_LRX_N0Q_20200903_1711.nids', 'Level3_LRX_N0Q_20200903_1702.nids', 'Level3_LRX_N0Q_20200903_1652.nids', 'Level3_LRX_N0Q_20200903_1643.nids', 'Level3_LRX_N0Q_20200903_1633.nids', 'Level3_LRX_N0Q_20200903_1623.nids', 'Level3_LRX_N0Q_20200903_1614.nids', 'Level3_LRX_N0Q_20200903_1604.nids', 'Level3_LRX_N0Q_20200903_1555.nids', 'Level3_LRX_N0Q_20200903_1545.nids', 'Level3_LRX_N0Q_20200903_1535.nids', 'Level3_LRX_N0Q_20200903_1526.nids', 'Level3_LRX_N0Q_20200903_1516.nids', 'Level3_LRX_N0Q_20200903_1506.nids', 'Level3_LRX_N0Q_20200903_1455.nids', 'Level3_LRX_N0Q_20200903_1445.nids', 'Level3_LRX_N0Q_20200903_1436.nids', 'Level3_LRX_N0Q_20200903_1426.nids', 'Level3_LRX_N0Q_20200903_1416.nids', 'Level3_LRX_N0Q_20200903_1407.nids', 'Level3_LRX_N0Q_20200903_1357.nids', 'Level3_LRX_N0Q_20200903_1348.nids', 'Level3_LRX_N0Q_20200903_1338.nids', 'Level3_LRX_N0Q_20200903_1328.nids', 'Level3_LRX_N0Q_20200903_1319.nids', 'Level3_LRX_N0Q_20200903_1309.nids', 'Level3_LRX_N0Q_20200903_1300.nids', 'Level3_LRX_N0Q_20200903_1250.nids', 'Level3_LRX_N0Q_20200903_1240.nids', 'Level3_LRX_N0Q_20200903_1231.nids', 'Level3_LRX_N0Q_20200903_1221.nids', 'Level3_LRX_N0Q_20200903_1212.nids', 'Level3_LRX_N0Q_20200903_1202.nids', 'Level3_LRX_N0Q_20200903_1152.nids', 'Level3_LRX_N0Q_20200903_1143.nids', 'Level3_LRX_N0Q_20200903_1133.nids', 'Level3_LRX_N0Q_20200903_1124.nids', 'Level3_LRX_N0Q_20200903_1114.nids', 'Level3_LRX_N0Q_20200903_1104.nids', 'Level3_LRX_N0Q_20200903_1055.nids', 'Level3_LRX_N0Q_20200903_1045.nids', 'Level3_LRX_N0Q_20200903_1036.nids', 'Level3_LRX_N0Q_20200903_1026.nids', 'Level3_LRX_N0Q_20200903_1016.nids', 'Level3_LRX_N0Q_20200903_1007.nids', 'Level3_LRX_N0Q_20200903_0957.nids', 'Level3_LRX_N0Q_20200903_0948.nids', 'Level3_LRX_N0Q_20200903_0938.nids', 'Level3_LRX_N0Q_20200903_0928.nids', 'Level3_LRX_N0Q_20200903_0919.nids', 'Level3_LRX_N0Q_20200903_0909.nids', 'Level3_LRX_N0Q_20200903_0900.nids', 'Level3_LRX_N0Q_20200903_0850.nids', 'Level3_LRX_N0Q_20200903_0840.nids', 'Level3_LRX_N0Q_20200903_0831.nids', 'Level3_LRX_N0Q_20200903_0821.nids', 'Level3_LRX_N0Q_20200903_0812.nids', 'Level3_LRX_N0Q_20200903_0802.nids', 'Level3_LRX_N0Q_20200903_0752.nids', 'Level3_LRX_N0Q_20200903_0743.nids', 'Level3_LRX_N0Q_20200903_0733.nids', 'Level3_LRX_N0Q_20200903_0723.nids', 'Level3_LRX_N0Q_20200903_0714.nids', 'Level3_LRX_N0Q_20200903_0704.nids', 'Level3_LRX_N0Q_20200903_0653.nids', 'Level3_LRX_N0Q_20200903_0643.nids', 'Level3_LRX_N0Q_20200903_0633.nids', 'Level3_LRX_N0Q_20200903_0624.nids', 'Level3_LRX_N0Q_20200903_0614.nids', 'Level3_LRX_N0Q_20200903_0605.nids', 'Level3_LRX_N0Q_20200903_0555.nids', 'Level3_LRX_N0Q_20200903_0545.nids', 'Level3_LRX_N0Q_20200903_0536.nids', 'Level3_LRX_N0Q_20200903_0526.nids', 'Level3_LRX_N0Q_20200903_0517.nids', 'Level3_LRX_N0Q_20200903_0507.nids', 'Level3_LRX_N0Q_20200903_0457.nids', 'Level3_LRX_N0Q_20200903_0448.nids', 'Level3_LRX_N0Q_20200903_0438.nids', 'Level3_LRX_N0Q_20200903_0429.nids', 'Level3_LRX_N0Q_20200903_0419.nids', 'Level3_LRX_N0Q_20200903_0409.nids', 'Level3_LRX_N0Q_20200903_0400.nids', 'Level3_LRX_N0Q_20200903_0350.nids', 'Level3_LRX_N0Q_20200903_0341.nids', 'Level3_LRX_N0Q_20200903_0331.nids', 'Level3_LRX_N0Q_20200903_0321.nids', 'Level3_LRX_N0Q_20200903_0312.nids', 'Level3_LRX_N0Q_20200903_0302.nids', 'Level3_LRX_N0Q_20200903_0253.nids', 'Level3_LRX_N0Q_20200903_0243.nids', 'Level3_LRX_N0Q_20200903_0233.nids', 'Level3_LRX_N0Q_20200903_0224.nids', 'Level3_LRX_N0Q_20200903_0214.nids', 'Level3_LRX_N0Q_20200903_0205.nids', 'Level3_LRX_N0Q_20200903_0155.nids', 'Level3_LRX_N0Q_20200903_0145.nids', 'Level3_LRX_N0Q_20200903_0136.nids', 'Level3_LRX_N0Q_20200903_0126.nids', 'Level3_LRX_N0Q_20200903_0117.nids', 'Level3_LRX_N0Q_20200903_0107.nids', 'Level3_LRX_N0Q_20200903_0057.nids', 'Level3_LRX_N0Q_20200903_0048.nids', 'Level3_LRX_N0Q_20200903_0038.nids', 'Level3_LRX_N0Q_20200903_0029.nids', 'Level3_LRX_N0Q_20200903_0019.nids', 'Level3_LRX_N0Q_20200903_0009.nids', 'Level3_LRX_N0Q_20200903_0000.nids']</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="#top">Top</a></p>
<hr style="height:2px;">
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a name="filtering"></a></p>
<h3 id="2.-Filtering-Data">2. Filtering Data<a class="anchor-link" href="#2.-Filtering-Data">¶</a>
</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We <em>could</em> manually look through that list above and figure out what dataset we're looking for and generate that name (or index). Siphon provides some helpers to simplify this process, provided the names of the dataset follow a pattern with the timestamp in the name:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">request_time</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">second</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">cat</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">filter_time_nearest</span><span class="p">(</span><span class="n">request_time</span><span class="p">)</span>
<span class="n">ds</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[5]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>Level3_LRX_N0Q_20200903_1828.nids</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can also find the list of datasets within a time range:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">datasets</span> <span class="o">=</span> <span class="n">cat</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">filter_time_range</span><span class="p">(</span><span class="n">request_time</span><span class="p">,</span> <span class="n">request_time</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">datasets</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>[Level3_LRX_N0Q_20200903_1926.nids, Level3_LRX_N0Q_20200903_1916.nids, Level3_LRX_N0Q_20200903_1907.nids, Level3_LRX_N0Q_20200903_1857.nids, Level3_LRX_N0Q_20200903_1847.nids, Level3_LRX_N0Q_20200903_1838.nids]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="alert alert-success">
    <b>EXERCISE</b>:
     <ul>
<li>Starting from http://thredds.ucar.edu/, find the level 2 radar data for the Tulsa, OK radar (KINX) for the previous day.</li>
        <li>Grab the URL and create a TDSCatalog instance.</li>
        <li>Using Siphon, find the data available in the catalog between 12Z and 18Z on the previous day.</li>
    </ul>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># YOUR CODE GOES HERE</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="alert alert-info">
    <b>SOLUTION</b>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># %load solutions/datasets.py</span>

<span class="c1"># Cell content replaced by load magic replacement.</span>
<span class="c1"># Solution from above in case you had trouble</span>
<span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">cat</span> <span class="o">=</span> <span class="n">TDSCatalog</span><span class="p">(</span><span class="sa">f</span><span class="s1">'https://thredds.ucar.edu/thredds/catalog/nexrad/level2/KINX/</span><span class="si">{</span><span class="n">date</span><span class="si">:</span><span class="s1">%Y%m%d</span><span class="si">}</span><span class="s1">/catalog.xml'</span><span class="p">)</span>
<span class="n">request_time</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">second</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">datasets</span> <span class="o">=</span> <span class="n">cat</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">filter_time_range</span><span class="p">(</span><span class="n">request_time</span><span class="p">,</span> <span class="n">request_time</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">6</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">datasets</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>[Level2_KINX_20200903_1800.ar2v, Level2_KINX_20200903_1752.ar2v, Level2_KINX_20200903_1743.ar2v, Level2_KINX_20200903_1737.ar2v, Level2_KINX_20200903_1732.ar2v, Level2_KINX_20200903_1723.ar2v, Level2_KINX_20200903_1718.ar2v, Level2_KINX_20200903_1416.ar2v, Level2_KINX_20200903_1407.ar2v, Level2_KINX_20200903_1358.ar2v, Level2_KINX_20200903_1349.ar2v, Level2_KINX_20200903_1341.ar2v, Level2_KINX_20200903_1332.ar2v, Level2_KINX_20200903_1323.ar2v, Level2_KINX_20200903_1314.ar2v, Level2_KINX_20200903_1306.ar2v, Level2_KINX_20200903_1257.ar2v, Level2_KINX_20200903_1248.ar2v, Level2_KINX_20200903_1239.ar2v, Level2_KINX_20200903_1231.ar2v, Level2_KINX_20200903_1222.ar2v, Level2_KINX_20200903_1213.ar2v, Level2_KINX_20200903_1204.ar2v]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="#top">Top</a></p>
<hr style="height:2px;">
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a name="dataaccess"></a></p>
<h3 id="3.-Use-Siphon-to-Perform-Remote-Data-Access">3. Use Siphon to Perform Remote Data Access<a class="anchor-link" href="#3.-Use-Siphon-to-Perform-Remote-Data-Access">¶</a>
</h3>
<p>Accessing catalogs is only part of the story; Siphon is much more useful if you're trying to access/download datasets.</p>
<p>For instance, using our data that we just retrieved:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Solution from above in case you had trouble</span>
<span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">cat</span> <span class="o">=</span> <span class="n">TDSCatalog</span><span class="p">(</span><span class="sa">f</span><span class="s1">'https://thredds.ucar.edu/thredds/catalog/nexrad/level2/KINX/</span><span class="si">{</span><span class="n">date</span><span class="si">:</span><span class="s1">%Y%m%d</span><span class="si">}</span><span class="s1">/catalog.xml'</span><span class="p">)</span>
<span class="n">request_time</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">second</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">datasets</span> <span class="o">=</span> <span class="n">cat</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">filter_time_range</span><span class="p">(</span><span class="n">request_time</span><span class="p">,</span> <span class="n">request_time</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">6</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">datasets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can ask Siphon to download the file locally:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">download</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Look in your file explorer panel or run the cell below to verify that we did actually download the file!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">os</span><span class="p">;</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[12]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>['Level2_KINX_20200903_1800.ar2v', 'solutions', 'Siphon Overview.ipynb']</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Or better yet, get a file-like object that lets us <code>read</code> from the file as if it were local:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fobj</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">remote_open</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">fobj</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>11870695
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is handy if you have Python code to read a particular format.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It's also possible to get access to the file through services that provide netCDF4-like access, but for the remote file. This access allows downloading information only for variables of interest, or for (index-based) subsets of that data:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nc</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">remote_access</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>By default this uses CDMRemote (if available), but it's also possible to ask for OPeNDAP (using netCDF4-python). There is even XArray support which is great with the declarative plotting interface - more on that later.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">nc</span><span class="o">.</span><span class="n">variables</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>['Reflectivity_HI', 'timeR_HI', 'elevationR_HI', 'azimuthR_HI', 'distanceR_HI', 'numRadialsR_HI', 'numGatesR_HI', 'Reflectivity', 'timeR', 'elevationR', 'azimuthR', 'distanceR', 'numRadialsR', 'numGatesR', 'RadialVelocity_HI', 'timeV_HI', 'elevationV_HI', 'azimuthV_HI', 'distanceV_HI', 'numRadialsV_HI', 'numGatesV_HI', 'RadialVelocity', 'timeV', 'elevationV', 'azimuthV', 'distanceV', 'numRadialsV', 'numGatesV', 'SpectrumWidth_HI', 'SpectrumWidth', 'DifferentialReflectivity_HI', 'timeD_HI', 'elevationD_HI', 'azimuthD_HI', 'distanceD_HI', 'numRadialsD_HI', 'numGatesD_HI', 'DifferentialReflectivity', 'timeD', 'elevationD', 'azimuthD', 'distanceD', 'numRadialsD', 'numGatesD', 'CorrelationCoefficient_HI', 'timeC_HI', 'elevationC_HI', 'azimuthC_HI', 'distanceC_HI', 'numRadialsC_HI', 'numGatesC_HI', 'CorrelationCoefficient', 'timeC', 'elevationC', 'azimuthC', 'distanceC', 'numRadialsC', 'numGatesC', 'DifferentialPhase_HI', 'timeP_HI', 'elevationP_HI', 'azimuthP_HI', 'distanceP_HI', 'numRadialsP_HI', 'numGatesP_HI', 'DifferentialPhase', 'timeP', 'elevationP', 'azimuthP', 'distanceP', 'numRadialsP', 'numGatesP']
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="#top">Top</a></p>
<hr style="height:2px;">
</div>
</div>
</div>
</div>
    </div>
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
    },
    displayAlign: 'center', // Change this to 'left' if you want left-aligned equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script></article><!--End of body content--><footer id="footer"><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-92978945-1', 'auto');
  ga('send', 'pageview');

</script><p>Do you find this useful?
  <a href="https://saythanks.io/to/unidata" class="btn btn-neutral" title="Installation Guide" accesskey="n">Say Thanks!</a>
</p>
Contents © 2020
<a href="mailto:support-python@unidata.ucar.edu">UCAR/Unidata</a> - Powered by
<a href="https://getnikola.com" rel="nofollow">Nikola</a>         

            
            
        </footer>
</div>
</div>


        <script src="../../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
